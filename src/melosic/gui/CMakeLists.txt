FIND_PACKAGE(Qt5Qml REQUIRED)
FIND_PACKAGE(Qt5Quick REQUIRED COMPONENTS Private)
FIND_PACKAGE(Qt5Widgets REQUIRED)
FIND_PACKAGE(Qt5Test)

set(CMAKE_AUTOMOC ON)
set(CMAKE_INCLUDE_CURRENT_DIR ON)

SET(qt-gui_SOURCES ${qt-gui_SOURCES} mainwindow.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} playlistmodel.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} playlistmanagermodel.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} playercontrols.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} categoryproxymodel.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} category.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} categorytag.cpp)
SET(qt-gui_SOURCES ${qt-gui_SOURCES} quicklogbackend.cpp)
if(Qt5Test_FOUND)
 add_definitions(-DQt5Test_FOUND)
 SET(qt-gui_SOURCES ${qt-gui_SOURCES} modeltest.cpp modeltest.h)
endif()

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} . ${Boost_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${Qt5Quick_PRIVATE_INCLUDE_DIRS})

QT5_ADD_RESOURCES(RCS_FILES resources.qrc)

ADD_LIBRARY(qt-gui SHARED ${qt-gui_SOURCES} ${RCS_FILES})
set_target_properties(qt-gui PROPERTIES PREFIX "")
qt5_use_modules(qt-gui Widgets Qml Quick Test)
TARGET_LINK_LIBRARIES(qt-gui Qt5::Widgets Qt5::Qml Qt5::Quick Qt5::Test melosiclib)
